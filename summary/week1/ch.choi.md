# 1장 노드 시작하기

[공식 홈페이지](https://nodejs.org/ko/)  

본 내용에 사용된 책 이미지는 [Node.js 교과서](https://book.naver.com/bookdb/book_detail.nhn?bid=16418778) 이미지를 참고하였습니다.

## 1.1 핵심 개념 이해하기
Node,js는 Chrome V8 javascript 엔진으로 빌드된 Javascript 런타임 입니다.
## 1.1.1 서버
노드는 서버 애플리케이션을 실행하는 데 제일 많이 사용됨

### [서버](https://ko.wikipedia.org/wiki/%EC%84%9C%EB%B2%84)란? 
네트워크를 통해 클라이언트에 정보나 서비스를 제공하는 컴퓨터 또는 프로그램을 말함

### [클라이언트](https://ko.wikipedia.org/wiki/%ED%81%B4%EB%9D%BC%EC%9D%B4%EC%96%B8%ED%8A%B8_(%EC%BB%B4%ED%93%A8%ED%8C%85))란?
네트워크를 통해 서버로 부터 서비스나 정보를 요청하여 제공 받는 단말기 또는 프로그램

![서버와 클라이언트](https://github.com/ohbokdong/NodeJSStudy/blob/main/summary/week1/sc.PNG)

### 예시
1. 웹사이트 이용(정보를 서버로 부터 받아서 제공)
2. 다운로드 (서버로 부터 해당 파일을 요청하여 다운로드)

서버도 서버가 클라이언트가 될 수 있음 (다른 서버로 데이터를 요청하는 경우)

서버는 클라이언트의 요청에 응답을 함  
항상 응답하는건 아니고 차단하거나 거부 할 수도 있음.

[HTTP 상태 코드](https://developer.mozilla.org/ko/docs/Web/HTTP/Status)  

노드는 자바스크립트 프로그램이 서버 기능을 하기 위한 도구를 제공하고 있음으로 서버 역할을 수행 할 수 있음.
  

## 1.1.2 자바스크립트 런타임
노드는 자바스크립트 런타임

[런타임](https://ko.wikipedia.org/wiki/%EB%9F%B0%ED%83%80%EC%9E%84)
은 특정 언어로 만든 프로그램을 실행 할 수 있는 환경을 뜻함 

wiki :  컴퓨터 언어 안에 쓰인 프로그램을 관리하기 위해 특정한 컴파일러나 가상 머신이 사용하는 기본 코드의 라이브러리나 프로그램을 가리키는 런타임 라이브러리

따라서 노드는 자바스크립 프로그램을 컴퓨터에서 실행 할 수 있음. 노드 -> 자바스크립트 실행기

노드는 V8과 libuv 라이브러리를 사용  
![노드구조](https://github.com/ohbokdong/NodeJSStudy/blob/main/summary/week1/node.PNG)  

노드는 libuv를 통해 이벤트 기반, 논 블로킹 I/O 모델을 구현 하고 있음.

## [libuv](http://docs.libuv.org/en/v1.x/design.html) 
libuv는 이벤크 기반 비동기 I/O모델을 중심으로 설계  
![libuv구조](https://github.com/ohbokdong/NodeJSStudy/blob/main/summary/week1/libuv.PNG)

### [V8](https://ko.wikipedia.org/wiki/V8_(%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8_%EC%97%94%EC%A7%84))
c++로 구현된 Google의 고성능 JavaScript 및 WebAssembly 엔진, 크롬 및 nodejs 에 사용
v8은 자바스크립트를 바이트 코드로 컴파일하고 실행 하는 방식을 사용, 성능 향상을 위해 인라인 캐싱과 같은 기법 사용 (몇몇 자료에서 jit 컴파일 이라고 보이기도 함)


## 1.1.3 이벤트 기반
이벤트 기반이란 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식  
노드도 이벤트 기반 방식으로 동작, 이벤트가 발생하면 이벤트 리스너에 등록해둔 콜백 함수가 호출  
이벤트 기반 모델에는 이벤트 루프라는 개념이 등장. 여러 이벤트가 발생 했을 때 어떤 순서로 콜백 함수를 호출 할지를 판단
(함수 호출 부분 생략)

## 1.1.3 논 블로킹 I/O
이벤트 루프를 잘 활용 하면 오래 걸리는 작업을 효율적으로 처리 할 수 있음.

기본적으로 작성한 자바스크립트 코드는 동시에 실행 될 수 없음. 하지만 I/O작업은 동시 처리 가능
I/O 작업은 논 블로킹 방식으로 처리 하기 때문 (논 블로킹은 libuv를 통해 가능)

![블로킹과논블로킹](https://github.com/ohbokdong/NodeJSStudy/blob/main/summary/week1/blocking.PNG)

## 1.1.5 싱글 스레드
싱글 스레드란 스레드가 하나뿐인 것을 의미, 작성된 스크립트가 동시에 실행 될 수 없는 이유이기도 함

- 프로세스  
운영체제에서 할당하는 작업의 단위
- 스레드  
프로세스 내에서 실행되는 흐름의 단위

엄밀히 말하면 노드는 싱글 스레드로 동작하는 것은 아님, 내부적으로 여러 스레드를 생성하고 사용하지만 제어 할 수 있는 스레드가 한정적임

블로킹이 발생하는 작업을 처리 하지 않는다면 싱글로도 가능, 블로킹이 발생 할거 같으면 논블로킹 방법으로 전환 필요

노드12 부터는 스레드풀 과 워크 스레드를 통해 멀티 스레드를 사용 할 수 있음.

(싱글 스레드와 멀티 스레드 예시 생략- 다?아?시?죠?)  

![thread](https://github.com/ohbokdong/NodeJSStudy/blob/main/summary/week1/thread.PNG)

## 1.2 서버로서의 노드
노드를 서버로 사용할 때의 특성을 살펴보자

서버는 기본적 으로 I/O 요청이 많이 발생, I/O 처리를 논 블로킹 방식으로 처리하는 노드를 사용하면 강점이 됨  
CPU 부하가 큰 작업에는 적절치 않음, 싱글 스레드로 작업이 처리 되기 때문 (블로킹)
  
작은 데이터를 주고 받는 서버에 적합

멀티 스레드 프로그래밍을 하더라고 다른 언어에 비해 속도가 많이 느림

CPU 많이 사용하는 작업을 위한 서버로는 권장 하지 않음

싱글 스레드방식 서버를 운영 할때는 에러로 인해 서버가 멈추지 않도록 잘 관리 해야함
(에러 처리 잘하자)

자바스크립트를 사용하기 때문에 웹사이트, 서버 개발을 할 수 있어 생선성 증가됨
(사장님 좋아요)
